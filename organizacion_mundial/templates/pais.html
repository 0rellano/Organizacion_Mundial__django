{% extends 'base.html' %}

{% block title %}{{pais.nombre}}
{% endblock %}

{% block content %}

<h1>Pais {{pais.nombre}}</h1>
<p>Liga que tiene{{pais.liga_nombre}}</p>
<h2>
    EQUIPOS
</h2>
<ul>
    {% for equipo in equipos %}
    <li>{{equipo}}</li>                
    {% endfor %}
    
</ul>
<h2>Plantel Tecnico</h2>
<ul>
   
    {% for empleado in plantel_tecnico %}
    <li>
        <p>nombre: {{empleado.nombre}}</p>
        <p>apellido: {{empleado.apellido}}</p>
        <p>nro pasaporte: {{empleado.nro_pasaporte}}</p>
        <p class="fecha-nacimiento" data-nacimiento="{{ empleado.fecha_nacimiento }}">Nacimiento: {{ empleado.fecha_nacimiento }}</p>
        <p class="edad-empleado">Edad: Calculando...</p>
        <p>fecha de comienzo: {{empleado.fecha_comienzo}}</p>
        {% if empleado.fecha_fin == None %}
        <p>Sigue trabajando.</p>
        {% else %}
        <p>No sigue trabajando.</p>
        {% endif %}
        <p>rol: {{empleado.rol}}</p>
        <p>descripcion rol: {{empleado.rol.descripcion}}</p>
        <p>---------------------------------------------------</p>
    </li>
    {% endfor %}
    
</ul>

<script>
    // Obtener todas las instancias de fecha-nacimiento y edad-empleado
    var fechasNacimiento = document.getElementsByClassName('fecha-nacimiento');
    var edadesEmpleado = document.getElementsByClassName('edad-empleado');

    // Iterar sobre cada instancia y calcular la edad
    for (var i = 0; i < fechasNacimiento.length; i++) {
        var fechaNacimientoString = fechasNacimiento[i].getAttribute('data-nacimiento');
        var fechaNacimiento = new Date(fechaNacimientoString);
        var fechaActual = new Date();
        var edadEmpleado = fechaActual.getFullYear() - fechaNacimiento.getFullYear();

        if (fechaActual.getMonth() < fechaNacimiento.getMonth() || (fechaActual.getMonth() === fechaNacimiento.getMonth() && fechaActual.getDate() < fechaNacimiento.getDate())) {
            edadEmpleado--;
        }

        // Mostrar la edad en el elemento correspondiente
        edadesEmpleado[i].textContent = 'Edad: ' + edadEmpleado + ' aÃ±os';
    }
</script>

{% endblock %}